<?xml version="1.0" encoding="UTF-8"?>
<interface>
    <requires lib="gtk" version="4.0"/>
    <requires lib="adwaita" version="1.0"/>

    <!-- Main Application Window Template -->
    <template class="Window" parent="AdwApplicationWindow">
        <property name="default-width">1000</property>
        <property name="default-height">600</property>
        <property name="content">
            <object class="AdwToastOverlay" id="window-toast-overlay">
                <child>
                    <object class="Navigation" id="window-navigation" />
                </child>
            </object>
        </property>
        <child>
            <object class="GtkGestureClick" id="window-click-gesture">
                <property name="propagation-phase">capture</property>
            </object>
        </child>
        <child>
            <object class="AdwBreakpoint" id="window-breakpoint">
                <condition>max-width: 600sp</condition>
            </object>
        </child>
    </template>

    <!-- Navigation Template -->

    <template class="Navigation" parent="AdwBin">
        <child>
            <object class="AdwNavigationView" id="navigation-view">
                <property name="pop-on-escape">true</property>
                <property name="animate-transitions">true</property>
                <child>
                    <object class="LoadingPage" id="navigation-loading-page" />
                </child>
                <child>
                    <object class="MainPage" id="navigation-main-page" />
                </child>
                <child>
                    <object class="ProductPage" id="product-page" />
                </child>
            </object>
        </child>
    </template>

    <!-- Loading Page Template -->

    <template class="LoadingPage" parent="AdwNavigationPage">
        <property name="tag">loading</property>
        <property name="title">Loading</property>
        <property name="spinning">true</property>
        <child>
            <object class="GtkWindowHandle">
                <child>
                    <object class="GtkSpinner">
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="spinning" bind-source="LoadingPage" bind-property="spinning" bind-flags="sync-create" />
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Page Template -->

    <template class="PageContent" parent="AdwBin">
        <child>
            <object class="AdwToolbarView">
                <child type="top">
                    <object class="AdwHeaderBar">
                        <property name="title-widget">
                            <object class="AdwWindowTitle">
                                <property name="title" bind-source="PageContent" bind-property="title" bind-flags="sync-create" />
                                <property name="subtitle" bind-source="PageContent" bind-property="subtitle" bind-flags="sync-create" />
                            </object>
                        </property>
                    </object>
                </child>
                <child>
                    <object class="GtkWindowHandle">
                        <child>
                            <object class="GtkScrolledWindow" id="page-content-scrolled-window">
                                <property name="hscrollbar-policy">never</property>
                                <property name="vscrollbar-policy">automatic</property>
                                <child>
                                    <object class="AdwClamp">
                                        <property name="maximum-size">800</property>
                                        <property name="tightening-threshold">0</property>
                                        <property name="child" bind-source="PageContent" bind-property="content" bind-flags="sync-create" />
                                    </object>
                                </child>
                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Product Template -->

    <template class="ProductPage" parent="AdwNavigationPage">
        <property name="tag">product</property>
        <property name="index">0</property>
        <child>
            <object class="PageContent" id="product-page-content">
                <property name="title" bind-source="ProductPage" bind-property="title" bind-flags="sync-create" />
                <property name="content">
                    <object class="GtkBox">
                        <property name="orientation">vertical</property>
                        <property name="spacing">12</property>
                        <property name="margin-top">24</property>
                        <property name="margin-bottom">24</property>
                        <child>
                            <object class="GtkImage">
                                <property name="icon-name" bind-source="ProductPage" bind-property="logo" bind-flags="sync-create" />
                                <property name="icon-size">large</property>
                                <property name="pixel-size">128</property>
                                <style>
                                    <class name="product-page-logo" />
                                    <class name="icon-dropshadow" />
                                    <class name="card" />
                                </style>
                            </object>
                        </child>
                        <child>
                            <object class="GtkLabel">
                                <property name="label" bind-source="ProductPage" bind-property="name" bind-flags="sync-create" />
                                <property name="halign">fill</property>
                                <property name="justify">left</property>
                                <property name="hexpand">true</property>
                                <property name="xalign">0.0</property>
                                <property name="css-classes">title-1</property>
                            </object>
                        </child>
                        <child>
                            <object class="GtkLabel">
                                <property name="label" bind-source="ProductPage" bind-property="description" bind-flags="sync-create" />
                                <property name="halign">fill</property>
                                <property name="justify">left</property>
                                <property name="xalign">0.0</property>
                                <property name="hexpand">true</property>
                                <property name="wrap">true</property>
                                <property name="wrap-mode">word</property>
                                <property name="css-classes">dim-label</property>
                            </object>
                        </child>
                        <child>
                            <object class="GtkListBox" id="product-page-country-list-box">
                                <property name="selection-mode">none</property>
                                <property name="css-classes">boxed-list</property>
                            </object>
                        </child>
                        <child>
                            <object class="AdwPreferencesGroup" id="product-page-categories-group">
                                <property name="title">Categories</property>
                            </object>
                        </child>
                        <child>
                            <object class="AdwPreferencesGroup" id="product-page-websites-group">
                                <property name="title">Websites</property>
                            </object>
                        </child>
                    </object>
                </property>
            </object>
        </child>
    </template>

    <!-- Product Row Template -->

    <template class="ProductRow" parent="AdwActionRow">
        <property name="activatable">true</property>
        <property name="index">0</property>
        <property name="icon-white">false</property>
        <property name="feature-subtitle">false</property>
        <child type="prefix">
            <object class="GtkImage" id="product-row-image">
                <style>
                    <class name="icon-dropshadow" />
                </style>
                <property name="visible" bind-source="ProductRow" bind-property="icon-visible" bind-flags="sync-create">false</property>
                <property name="icon-name" bind-source="ProductRow" bind-property="icon" bind-flags="sync-create"/>
            </object>
        </child>
    </template>

    <!-- Main page Template-->

    <template class="MainPage" parent="AdwNavigationPage">
        <property name="tag">main</property>
        <child>
            <object class="AdwNavigationSplitView" id="main-page-split-view">
                <property name="sidebar">
                    <object class="Sidebar" id="main-page-sidebar"/>
                </property>
                <property name="content">
                    <object class="OverviewPage" id="main-page-overview">
                        <property name="title" bind-source="MainPage" bind-property="title" bind-flags="sync-create" />
                    </object>
                </property>
            </object>
        </child>
    </template>

    <!-- Overview Page Template -->
    <template class="OverviewPage" parent="AdwNavigationPage">
        <property name="tag">overview</property>
        <child>
            <object class="PageContent" id="overview-page-content">
                <property name="title" bind-source="OverviewPage" bind-property="title" bind-flags="sync-create" />
                <property name="subtitle" bind-source="OverviewPage" bind-property="subtitle" bind-flags="sync-create" />
                <property name="content">
                    <object class="GtkBox" id="overview-page-box">
                        <property name="margin-top">24</property>
                        <property name="margin-bottom">24</property>
                        <property name="orientation">vertical</property>
                        <property name="spacing">24</property>
                    </object>
                </property>
            </object>
        </child>
    </template>

    <!-- Product List Group Template-->

    <template class="OverviewProductGroup" parent="GtkBox">
        <property name="orientation">vertical</property>
        <property name="spacing">12</property>
        <property name="index">0</property>
        <child>
            <object class="GtkLabel">
                <property name="label" bind-source="OverviewProductGroup" bind-property="title" bind-flags="sync-create" />
                <property name="halign">fill</property>
                <property name="justify">left</property>
                <property name="hexpand">true</property>
                <property name="xalign">0.0</property>
                <property name="wrap">true</property>
                <property name="wrap-mode">word</property>
                <property name="css-classes">title-2</property>
            </object>
        </child>
        <child>
            <object class="GtkLabel">
                <property name="label" bind-source="OverviewProductGroup" bind-property="description" bind-flags="sync-create" />
                <property name="halign">fill</property>
                <property name="justify">left</property>
                <property name="hexpand">true</property>
                <property name="xalign">0.0</property>
                <property name="wrap">true</property>
                <property name="wrap-mode">word</property>
                <property name="css-classes">dim-label</property>
            </object>
        </child>
        <child>
            <object class="GtkListBox" id="overview-product-group-list-box">
                <property name="selection-mode">none</property>
                <property name="css-classes">boxed-list</property>
            </object>
        </child>
    </template>

    <!-- Product List Row Template -->
    <template class="OverviewProductRow" parent="AdwActionRow">
        <property name="title" bind-source="OverviewProductRow" bind-property="name" bind-flags="sync-create"/>
        <property name="subtitle" bind-source="OverviewProductRow" bind-property="summary" bind-flags="sync-create"/>
        <property name="activatable">true</property>
        <property name="index">0</property>
        
        <child type="prefix">
            <object class="GtkImage" id="overview-product-row-logo">
                <style>
                    <class name="overview-product-row-logo" />
                    <class name="lowres-icon" />
                    <class name="card" />
                </style>
                <property name="hexpand">false</property>
                <property name="vexpand">false</property>
                <property name="valign">center</property>
                <property name="icon-size">large</property>
                <property name="icon-name" bind-source="OverviewProductRow" bind-property="logo" bind-flags="sync-create"/>
            </object>
        </child>
        
        <child type="suffix">
            <object class="GtkBox" id="overview-product-row-suffix">
                <property name="orientation">horizontal</property>
                <property name="spacing">6</property>
                <child>
                    <object class="GtkImage" id="overview-product-row-country">
                        <property name="pixel-size">16</property>
                        <property name="icon-name" bind-source="OverviewProductRow" bind-property="country" bind-flags="sync-create"/>
                        <property name="css-classes">lowres-icon</property>
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Sidebar Template -->
    <template class="Sidebar" parent="AdwNavigationPage">
        <property name="tag">sidebar</property>
        <property name="title">Sidebar</property>
        <property name="css-classes">sidebar</property>
        <child>
            <object class="GtkWindowHandle">
                <child>
                    <object class="GtkBox">
                        <property name="orientation">vertical</property>
                        <property name="spacing">0</property>
                        <property name="homogeneous">false</property>
                        <child>
                            <object class="SidebarPrimaryList" id="sidebar-primary-list" />
                        </child>
                        <child>
                            <object class="GtkSeparator">
                                <property name="margin-top">6</property>
                                <property name="margin-bottom">6</property>
                            </object>
                        </child>
                        <child>
                            <object class="SidebarCategoryList" id="sidebar-category-list" />
                        </child>
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Primary List -->

    <template class="SidebarPrimaryList" parent="AdwBin">
        <child>
            <object class="GtkListBox" id="sidebar-primary-list-box">
                <property name="activate-on-single-click">true</property>
                <property name="selection-mode">single</property>
                <property name="tab-behavior">item</property>
                <property name="show-separators">false</property>
                <property name="hexpand">true</property>
                <property name="vexpand">false</property>
                <style>
                    <class name="navigation-sidebar" />
                    <class name="boxed-list-separate" />
                </style>
                <child>
                    <object class="SidebarSearchRow" id="sidebar-primary-search-row" />
                </child>
                <child>
                    <object class="SidebarCountryRow" id="sidebar-primary-country-row" />
                </child>
            </object>
        </child>
        <child>
            <object class="GtkEventControllerFocus" id="sidebar-primary-event-controller-focus">
                <property name="propagation-phase">capture</property>
            </object>
        </child>
    </template>

    <!-- Sidebar Country Row -->

    <template class="SidebarCountryRow" parent="GtkListBoxRow">
        <property name="css-classes">sidebar-country-row</property>
        <child>
            <object class="GtkDropDown" id="sidebar-country-row-drop-down" />
        </child>
    </template>

    <!-- Sidebar Country Item -->

    <template class="SidebarCountryItem" parent="GtkBox">
        <property name="orientation">horizontal</property>
        <property name="spacing">6</property>
        <property name="caption-visible">false</property>
        <property name="index">0</property>
        <child>
            <object class="GtkImage" id="sidebar-country-item-image">
                <property name="icon-name" bind-source="SidebarCountryItem" bind-property="flag" bind-flags="sync-create"/>
                <property name="css-classes">lowres-icon</property>
            </object>
        </child>
        <child>
            <object class="GtkLabel">
                <property name="label" bind-source="SidebarCountryItem" bind-property="caption" bind-flags="sync-create"/>
                <property name="visible" bind-source="SidebarCountryItem" bind-property="caption-visible" bind-flags="sync-create"/>
                <property name="halign">start</property>
                <property name="xalign">0.0</property>
                <style>
                    <class name="dim-label" />
                    <class name="caption" />
                </style>
            </object>
        </child>
        <child>
            <object class="GtkLabel">
                <property name="label" bind-source="SidebarCountryItem" bind-property="label" bind-flags="sync-create"/>
                <property name="css-classes">sidebar-label</property>
                <property name="hexpand">true</property>
                <property name="xalign">0.0</property>
                <style>
                    <class name="caption" />
                </style>
            </object>
        </child>
    </template>

    <!-- Sidebar Search Row -->

    <template class="SidebarSearchRow" parent="GtkListBoxRow">
        <property name="css-classes">sidebar-search-row</property>
        <child>
            <object class="GtkSearchEntry" id="sidebar-search-row-entry">
                <property name="placeholder-text">Search</property>
                <property name="input-purpose">alpha</property>
                <property name="input-hints">no-emoji | spellcheck | lowercase</property>
                <property name="search-delay">200</property>
            </object>
        </child>
        <child>
            <object class="GtkGestureClick" id="sidebar-search-row-click-gesture">
                <property name="propagation-phase">capture</property>
            </object>
        </child>
    </template>

    <!-- Sidebar Category List -->

    <template class="SidebarCategoryList" parent="AdwBin">
        <child>
            <object class="GtkScrolledWindow">
                <property name="hscrollbar-policy">never</property>
                <property name="vexpand">true</property>
                <property name="hexpand">true</property>
                <child>
                    <object class="GtkListBox" id="sidebar-category-list-box">
                        <property name="activate-on-single-click">true</property>
                        <property name="selection-mode">single</property>
                        <property name="tab-behavior">item</property>
                        <property name="show-separators">false</property>
                        <property name="hexpand">true</property>
                        <property name="vexpand">false</property>
                        <style>
                            <class name="navigation-sidebar" />
                        </style>
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Sidebar Row Template -->
    <template class="SidebarRow" parent="GtkListBoxRow">
        <property name="focus-on-click">false</property>
        <property name="css-classes">sidebar-row</property>
        <property name="activatable">true</property>
        <property name="expand">true</property>
        <property name="index">0</property>
        <property name="child">
            <object class="GtkRevealer">
                <property name="visible" bind-source="SidebarRow" bind-property="expand" bind-flags="sync-create" />
                <property name="reveal-child" bind-source="SidebarRow" bind-property="expand" bind-flags="sync-create" />
                <child>
                    <object class="GtkBox">
                        <property name="orientation">horizontal</property>
                        <property name="spacing">6</property>
                        <property name="margin-start">6</property>
                        <property name="margin-end">6</property>
                        <child>
                            <object class="GtkImage">
                                <style>
                                    <class name="sidebar-icon" />
                                    <class name="lowres-icon" />
                                    <class name="icon-white" />
                                </style>
                                <property name="icon-name" bind-source="SidebarRow" bind-property="icon" bind-flags="sync-create"/>
                            </object>
                        </child>
                        <child>
                            <object class="GtkLabel">
                                <property name="css-classes">sidebar-label</property>
                                <property name="hexpand">true</property>
                                <property name="xalign">0.0</property>
                                <property name="wrap">true</property>
                                <property name="wrap-mode">word-char</property>
                                <property name="lines">2</property>
                                <property name="ellipsize">end</property>
                                <property name="label" bind-source="SidebarRow" bind-property="label" bind-flags="sync-create"/>
                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </property>
    </template>

</interface>