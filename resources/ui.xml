<?xml version="1.0" encoding="UTF-8"?>
<interface>
    <requires lib="gtk" version="4.0"/>
    <requires lib="adwaita" version="1.0"/>

    <!-- Main Application Window Template -->
    <template class="Window" parent="AdwApplicationWindow">
        <property name="default-width">800</property>
        <property name="default-height">600</property>
        <property name="content">
            <object class="GtkWindowHandle">
                <child>
                    <object class="AdwOverlaySplitView" id="overlay-split-view">
                        <property name="sidebar-width-fraction">0.25</property>
                        <property name="min-sidebar-width">200</property>
                        <property name="max-sidebar-width">300</property>
                        <property name="sidebar">
                            <object class="Sidebar" id="sidebar"/>
                        </property>
                        <property name="content">
                            <object class="AdwNavigationView" id="navigation-view">
                                <child>
                                    <object class="ProductList" id="product-list"/>
                                </child>
                            </object>
                        </property>
                    </object>
                </child>
            </object>
        </property>
    </template>

    <!-- Product List Page Template -->
    <template class="ProductList" parent="AdwNavigationPage">
        <property name="tag">product_list</property>
        <property name="title">Product List</property>
        <child>
            <object class="AdwToolbarView">
                <child type="top">
                    <object class="AdwHeaderBar">
                        <property name="show-title">false</property>
                    </object>
                </child>
                <child>
                    <object class="GtkScrolledWindow">
                        <property name="hscrollbar-policy">never</property>
                        <property name="vscrollbar-policy">automatic</property>
                        <child>
                            <object class="AdwClamp">
                                <property name="maximum-size">600</property>
                                <property name="tightening-threshold">400</property>
                                <child>
                                    <object class="AdwPreferencesPage" id="product-list-preferences"/>
                                </child>
                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Product List Group Template-->

    <template class="ProductListGroup" parent="AdwPreferencesGroup">
        <property name="title" />
        <property name="description" />
    </template>

    <!-- Product List Row Template -->
    <template class="ProductListRow" parent="AdwActionRow">
        <property name="title" bind-source="ProductListRow" bind-property="name" bind-flags="sync-create"/>
        <property name="subtitle" bind-source="ProductListRow" bind-property="description" bind-flags="sync-create"/>
        <property name="activatable">true</property>
        
        <child type="prefix">
            <object class="GtkImage" id="product-logo">
                <property name="pixel-size">48</property>
                <property name="icon-name" bind-source="ProductListRow" bind-property="logo" bind-flags="sync-create"/>
            </object>
        </child>
        
        <child type="suffix">
            <object class="GtkBox">
                <property name="orientation">horizontal</property>
                <property name="spacing">6</property>
                
                <child>
                    <object class="GtkLabel" id="product-country-name">
                        <property name="label" bind-source="ProductListRow" bind-property="country-name" bind-flags="sync-create"/>
                        <property name="css-classes">dim-label caption</property>
                    </object>
                </child>
                
                <child>
                    <object class="GtkImage" id="product-country-flag">
                        <property name="pixel-size">16</property>
                        <property name="icon-name" bind-source="ProductListRow" bind-property="country-flag" bind-flags="sync-create"/>
                        <property name="css-classes">dim-label</property>
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Sidebar Template -->
    <template class="Sidebar" parent="GtkBox">
        <property name="orientation">vertical</property>
        <property name="css-classes">sidebar</property>
        <child>
            <object class="GtkScrolledWindow">
                <property name="hscrollbar-policy">never</property>
                <property name="vexpand">true</property>
                <property name="hexpand">true</property>
                <child>
                    <object class="GtkBox">
                        <child>
                            <object class="GtkListBox" id="sidebar-list">
                                <property name="activate-on-single-click">true</property>
                                <property name="selection-mode">single</property>
                                <property name="tab-behavior">item</property>
                                <property name="show-separators">false</property>
                                <property name="hexpand">true</property>
                                <property name="vexpand">false</property>
                                <property name="css-classes">navigation-sidebar</property>
                                <child>
                                    <object class="SidebarRow" id="sidebar-row-categories">
                                        <property name="icon">view-list-symbolic</property>
                                        <property name="label">Categories</property>
                                    </object>
                                </child>
                                <child>
                                    <object class="SidebarRow" id="sidebar-row-countries">
                                        <property name="icon">network-wireless-symbolic</property>
                                        <property name="label">Countries</property>
                                    </object>
                                </child>
                                <child>
                                    <object class="SidebarRow" id="sidebar-row-about">
                                        <property name="icon">help-about-symbolic</property>
                                        <property name="label">About</property>
                                    </object>
                                </child>
                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </child>
    </template>

    <!-- Sidebar Row Template -->
    <template class="SidebarRow" parent="GtkListBoxRow">
        <property name="focus-on-click">false</property>
        <property name="css-classes">sidebar-row</property>
        <property name="activatable">true</property>
        <property name="expand">true</property>
        <property name="child">
            <object class="GtkRevealer" id="sidebar-row-revealer">
                <property name="visible" bind-source="SidebarRow" bind-property="expand" bind-flags="sync-create" />
                <property name="reveal-child" bind-source="SidebarRow" bind-property="expand" bind-flags="sync-create" />
                <child>
                    <object class="GtkBox">
                        <property name="orientation">horizontal</property>
                        <property name="spacing">0</property>
                        <child>
                            <object class="GtkImage" id="sidebar-row-icon">
                                <property name="css-classes">sidebar-icon</property>
                                <property name="margin-end">4</property>
                                <property name="icon-name" bind-source="SidebarRow" bind-property="icon" bind-flags="sync-create"/>
                            </object>
                        </child>
                        <child>
                            <object class="GtkLabel" id="sidebar-row-label">
                                <property name="css-classes">sidebar-label</property>
                                <property name="hexpand">true</property>
                                <property name="margin-start">4</property>
                                <property name="margin-end">4</property>
                                <property name="xalign">0.0</property>
                                <property name="ellipsize">middle</property>
                                <property name="label" bind-source="SidebarRow" bind-property="label" bind-flags="sync-create"/>
                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </property>
    </template>

</interface>